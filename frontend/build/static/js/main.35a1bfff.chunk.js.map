{"version":3,"sources":["config.js","auth/index.js","core/Menu.js","core/cartHelpers.js","core/Layout.js","user/Signup.js","user/Signin.js","core/apiCore.js","core/ShowImage.js","core/Card.js","core/Search.js","core/Home.js","auth/PrivrateRoute.js","user/UserDashboard.js","user/apiUser.js","auth/AdminRoute.js","user/AdminDashboard.js","admin/apiAdmin.js","admin/AddCategory.js","admin/AddProduct.js","core/Checkbox.js","core/RadioBox.js","core/fixedPrices.js","core/Shop.js","core/Product.js","core/Checkout.js","core/Cart.js","user/Profile.js","admin/ManageProducts.js","admin/UpdateProduct.js","Routes.js","index.js"],"names":["API","process","isAuthenticated","window","localStorage","getItem","JSON","parse","isActive","history","path","location","pathname","color","withRouter","class","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","className","to","style","length","user","role","cursor","onClick","next","removeItem","fetch","method","then","response","console","log","catch","err","signout","push","Layout","title","description","children","Signup","useState","name","email","password","error","success","values","setValues","handleChange","event","target","value","clickSubmit","preventDefault","headers","Accept","body","stringify","json","data","display","onChange","Signin","loading","redirectToRefferer","signin","setItem","authenticate","getProducts","sortBy","getCategories","getFilteredProducts","skip","limit","filters","ShowImage","item","url","src","_id","alt","maxHeight","maxWidth","Card","quantity","product","showViewProductButton","showAddToCartButton","cartUpdate","showRemoveProductButton","setRun","f","run","undefined","redirect","setRedirect","count","setCount","addToCart","cart","Array","from","Set","map","p","find","addItem","productId","i","updateItem","shouldRedirect","substring","price","category","moment","createdAt","fromNow","shipping","showViewButton","showAddToCart","splice","showRemoveButton","showCartUpdateOptions","Search","categories","search","results","searched","setData","useEffect","searchData","params","query","queryString","list","searchSubmit","e","searchMessage","onSubmit","placeholder","border","searchForm","searchedProducts","Home","productsBySell","setProductsBySell","productsByArrival","setProductsByArrival","setError","PrivateRoute","Component","component","rest","render","props","state","Dashboard","setHistory","token","init","userId","Authorization","getPurchaseHistory","h","products","purchaseHistory","AdminRoute","AdminDashboard","AddCategory","setName","setSuccess","createCategory","showSuccess","showError","autoFocus","required","AddProduct","telegram_no","instagram_handle","_isNew","_store","photo","email_address","createdProduct","redirectToProfile","formData","FormData","files","set","createProduct","accept","c","Checkbox","handleFilters","checked","setCheked","handleToggle","currentCategoryId","indexOf","newCheckedCategoryId","RadioBox","prices","setValue","array","Shop","myFilters","setMyFilters","setCategories","setSkip","size","setSize","filteredResults","setFilteredResults","loadFilteredResults","newFilters","loadMore","toSkip","filterBy","priceValues","handlePrice","key","parseInt","Product","setProduct","relatedProduct","setRelatedProduct","loadSingleProduct","read","listRelated","match","Checkout","reduce","currentValue","nextValue","Cart","items","setItems","showItems","Profile","update","alert","auth","updateUser","profileUpdate","redirectUser","ManageProducts","setProducts","loadProducts","destroy","deleteProduct","UpdateProduct","getProduct","initCategories","updateProduct","Routes","exact","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.35a1bfff.chunk.js","sourcesContent":["export const API = process.env.REACT_APP_API_URL;","import {API} from '../config';\r\n\r\nexport const signup = (user) => {\r\n    //console.log(name, email, password)\r\n    return fetch(`${API}/signup`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: 'application/json',\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n    .then(response => {\r\n        return response.json()\r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n    })\r\n} \r\n\r\n\r\nexport const signin = (user) => {\r\n    //console.log(name, email, password)\r\n    return fetch(`${API}/signin`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: 'application/json',\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n    .then(response => {\r\n        return response.json()\r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n    })\r\n} \r\nexport const authenticate = (data, next) => {\r\n    if(typeof window !== 'undefined'){\r\n        localStorage.setItem('jwt', JSON.stringify(data))\r\n        next()\r\n    }\r\n}\r\n\r\nexport const signout = next => {\r\n    if (typeof window !== 'undefined') {\r\n        localStorage.removeItem('jwt');\r\n        next();\r\n        return fetch(`${API}/signout`, {\r\n            method: 'GET'\r\n        })\r\n            .then(response => {\r\n                console.log('signout', response);\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n};\r\n\r\nexport const isAuthenticated = () => {\r\n    if (typeof window == 'undefined') {\r\n        return false;\r\n    }\r\n    if (localStorage.getItem('jwt')) {\r\n        return JSON.parse(localStorage.getItem('jwt'));\r\n    } else {\r\n        return false;\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, { Fragment } from 'react'\r\nimport {Link, withRouter} from 'react-router-dom'\r\nimport {signout, isAuthenticated} from '../auth';\r\nimport {addItem, itemTotal} from './cartHelpers';\r\n \r\nconst isActive = (history, path) => {\r\n    if (history.location.pathname === path) {\r\n        return { color: \"#ff9900\" };\r\n    } else {\r\n        return { color: \"#ffffff\" };\r\n    }\r\n}\r\n\r\n\r\n    \r\n\r\n\r\nconst Menu = ({history}) => (\r\n    <div>\r\n        <div class=\"navy sticky-top\">\r\n        <nav class=\"navbar navbar-expand-lg navbar-dark bg-primary sticky-top\">\r\n\r\n            \r\n            <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\"\r\n                aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                <span class=\"navbar-toggler-icon\"></span>\r\n            </button>\r\n\r\n            <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n            <ul className=\"navbar-nav mr-auto\">\r\n            <li className=\"nav-item\">\r\n                <Link className=\"nav-link\" to=\"/\" style={isActive(history, '/')}>Home</Link>\r\n            </li>\r\n            \r\n            \r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/shop\")}\r\n                    to=\"/shop\"\r\n                >\r\n                    Shop\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/shop\")}\r\n                    to=\"/shop\"\r\n                >\r\n                    About \r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/shop\")}\r\n                    to=\"/shop\"\r\n                >\r\n                    Shop\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/shop\")}\r\n                    to=\"/shop\"\r\n                >\r\n                    Categories\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/shop\")}\r\n                    to=\"/shop\"\r\n                >\r\n                    Sell On CUSM\r\n                </Link>\r\n            </li>\r\n\r\n            \r\n            \r\n\r\n            \r\n        </ul>\r\n                <div class=\"form-inline my-2 \">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/cart\")}\r\n                    to=\"/cart\"\r\n                >\r\n                    Cart{\" \"}\r\n                    <sup>\r\n                        <small className=\"cart-badge\">{itemTotal()}</small>\r\n                    </sup>\r\n                </Link>\r\n\r\n        {isAuthenticated() && isAuthenticated().user.role === 0 && (\r\n                \r\n                    <Link\r\n                        className=\"nav-link\"\r\n                        style={isActive(history, \"/user/dashboard\")}\r\n                        to=\"/user/dashboard\"\r\n                    >\r\n                        Dashboard\r\n                    </Link>\r\n               \r\n            )}\r\n            {isAuthenticated() && isAuthenticated().user.role === 1 && (\r\n                \r\n                    <Link\r\n                        className=\"nav-link\"\r\n                        style={isActive(history, \"/admin/dashboard\")}\r\n                        to=\"/admin/dashboard\"\r\n                    >\r\n                        Dashboard\r\n                    </Link>\r\n                \r\n            )}\r\n        {!isAuthenticated() && (\r\n                <Fragment>\r\n                    \r\n                        <Link\r\n                            className=\"nav-link\"\r\n                            style={isActive(history, \"/signin\")}\r\n                            to=\"/signin\"\r\n                        >\r\n                            SignIn\r\n                        </Link>\r\n                   \r\n\r\n                    \r\n                        <Link\r\n                            className=\"nav-link\"\r\n                            style={isActive(history, \"/signup\")}\r\n                            to=\"/signup\"\r\n                        >\r\n                            SignUp\r\n                        </Link>\r\n                    \r\n                </Fragment>\r\n            )}\r\n            \r\n            {isAuthenticated() && (\r\n                \r\n                    <span\r\n                        className=\"nav-link\"\r\n                        style={{ cursor: \"pointer\", color: \"#ffffff\" }}\r\n                        onClick={() =>\r\n                            signout(() => {\r\n                                history.push(\"/\");\r\n                            })\r\n                        }\r\n                    >\r\n                        Signout\r\n                    </span>\r\n                \r\n            )}\r\n\r\n                </div>\r\n            </div>\r\n\r\n        </nav>\r\n    </div>\r\n        {/* <div className=\"navy sticky-top\">\r\n        <nav className=\"navbar navbar-expand-lg navbar-primary bg-primary sticky-top\">\r\n        <ul className=\"navbar-nav mr-auto\">\r\n            <li className=\"nav-item\">\r\n                <Link className=\"nav-link\" to=\"/\" style={isActive(history, '/')}>Home</Link>\r\n            </li>\r\n            \r\n            \r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/shop\")}\r\n                    to=\"/shop\"\r\n                >\r\n                    Shop\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/shop\")}\r\n                    to=\"/shop\"\r\n                >\r\n                    About \r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/shop\")}\r\n                    to=\"/shop\"\r\n                >\r\n                    Shop\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/shop\")}\r\n                    to=\"/shop\"\r\n                >\r\n                    Categories\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/shop\")}\r\n                    to=\"/shop\"\r\n                >\r\n                    Sell On CUSM\r\n                </Link>\r\n            </li>\r\n\r\n            <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/cart\")}\r\n                    to=\"/cart\"\r\n                >\r\n                    Cart{\" \"}\r\n                    <sup>\r\n                        <small className=\"cart-badge\">{itemTotal()}</small>\r\n                    </sup>\r\n                </Link>\r\n\r\n        {isAuthenticated() && isAuthenticated().user.role === 0 && (\r\n                \r\n                    <Link\r\n                        className=\"nav-link\"\r\n                        style={isActive(history, \"/user/dashboard\")}\r\n                        to=\"/user/dashboard\"\r\n                    >\r\n                        Dashboard\r\n                    </Link>\r\n               \r\n            )}\r\n            {isAuthenticated() && isAuthenticated().user.role === 1 && (\r\n                \r\n                    <Link\r\n                        className=\"nav-link\"\r\n                        style={isActive(history, \"/admin/dashboard\")}\r\n                        to=\"/admin/dashboard\"\r\n                    >\r\n                        Dashboard\r\n                    </Link>\r\n                \r\n            )}\r\n        {!isAuthenticated() && (\r\n                <Fragment>\r\n                    \r\n                        <Link\r\n                            className=\"nav-link\"\r\n                            style={isActive(history, \"/signin\")}\r\n                            to=\"/signin\"\r\n                        >\r\n                            Signin\r\n                        </Link>\r\n                   \r\n\r\n                    \r\n                        <Link\r\n                            className=\"nav-link\"\r\n                            style={isActive(history, \"/signup\")}\r\n                            to=\"/signup\"\r\n                        >\r\n                            Signup\r\n                        </Link>\r\n                    \r\n                </Fragment>\r\n            )}\r\n            \r\n            {isAuthenticated() && (\r\n                \r\n                    <span\r\n                        className=\"nav-link\"\r\n                        style={{ cursor: \"pointer\", color: \"#ffffff\" }}\r\n                        onClick={() =>\r\n                            signout(() => {\r\n                                history.push(\"/\");\r\n                            })\r\n                        }\r\n                    >\r\n                        Signout\r\n                    </span>\r\n                \r\n            )}\r\n\r\n            \r\n\r\n            \r\n        </ul>\r\n        <div class=\"form-inline my-2 \">\r\n            <a href=\"mailto:bolu4good@gmail.com\" style={{color: \"white\"}}>bolu4good@gmail.com</a>\r\n        </div>\r\n        \r\n                \r\n        </nav>\r\n        </div> */}\r\n    </div>\r\n);\r\n\r\nexport default withRouter(Menu);","export const addItem = (item = [], count = 0, next = f => f) => {\r\n    let cart = [];\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n        cart.push({\r\n            ...item,\r\n            count: 1\r\n        });\r\n\r\n        // remove duplicates\r\n        // build an Array from new Set and turn it back into array using Array.from\r\n        // so that later we can re-map it\r\n        // new set will only allow unique values in it\r\n        // so pass the ids of each object/product\r\n        // If the loop tries to add the same value again, it'll get ignored\r\n        // ...with the array of ids we got on when first map() was used\r\n        // run map() on it again and return the actual product from the cart\r\n\r\n        cart = Array.from(new Set(cart.map(p => p._id))).map(id => {\r\n            return cart.find(p => p._id === id);\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n        next();\r\n    }\r\n};\r\n\r\nexport const itemTotal = () => {\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            return JSON.parse(localStorage.getItem('cart')).length;\r\n        }\r\n    }\r\n    return 0;\r\n};\r\n\r\nexport const getCart = () => {\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            return JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n    }\r\n    return [];\r\n};\r\n\r\nexport const updateItem = (productId, count) => {\r\n    let cart = [];\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n\r\n        cart.map((product, i) => {\r\n            if (product._id === productId) {\r\n                cart[i].count = count;\r\n            }\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n    }\r\n};\r\n\r\nexport const removeItem = productId => {\r\n    let cart = [];\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n\r\n        cart.map((product, i) => {\r\n            if (product._id === productId) {\r\n                cart.splice(i, 1);\r\n            }\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n    }\r\n    return cart;\r\n};\r\n\r\nexport const emptyCart = next => {\r\n    if (typeof window !== 'undefined') {\r\n        localStorage.removeItem('cart');\r\n        next();\r\n    }\r\n};\r\n","import React from 'react';\r\nimport Menu from \"./Menu\";\r\nimport \"../style.css\";\r\n\r\nconst Layout = ({title = 'Title', description = 'Description', className, children}) => (\r\n    <div>\r\n        <Menu/>\r\n        <div className=\"jumbotron\">\r\n        <h2>{title}</h2>\r\n        <p className=\"lead\">{description}</p>\r\n    </div>\r\n    <div className={className}>\r\n        {children}\r\n    </div>\r\n    </div>\r\n    \r\n)\r\n\r\nexport default Layout;","import React, { useState } from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport Layout from '../core/Layout'\r\nimport {signup} from '../auth'\r\n\r\nconst Signup = () => {\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        error: '',\r\n        success: false\r\n    })\r\n\r\n    const {name, email, password, success, error} = values\r\n\r\n    const handleChange = name => event => {\r\n        setValues({...values, error: false, [name]: event.target.value});\r\n    }\r\n\r\n    \r\n    const clickSubmit = (event) => {\r\n        event.preventDefault()\r\n        setValues({...values, error: false})\r\n        signup({name, email, password})\r\n        .then(data => {\r\n            if(data.error){\r\n                setValues({...values, error: data.error, success: false})\r\n            }\r\n            else{\r\n                setValues({\r\n                    ...values,\r\n                    name: '',\r\n                    email: '',\r\n                    password: '',\r\n                    error: '',\r\n                    success: true\r\n                })\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    const signUpForm = () => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\" value={name} className=\"form-control\"/>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input onChange={handleChange('email')} type=\"email\" value={email} className=\"form-control\"/>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input onChange={handleChange('password')} type=\"password\" value={password} className=\"form-control\"/>\r\n            </div>\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">Submit</button>\r\n        </form>\r\n    )\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}}>\r\n            {error}\r\n        </div>\r\n    )\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-info\" style={{display: success ? '' : 'none'}}>\r\n            New account created, please <Link to=\"/signin\">Sign In</Link>\r\n        </div>\r\n    )\r\n\r\n\r\n    return(\r\n        <Layout title=\"Signup Page\"\r\n    description=\"Node React E-commerce App\"\r\n    className=\"container col-md-8 offset-md-2\">\r\n        {showSuccess()}\r\n        {showError()}\r\n        {signUpForm()}\r\n    </Layout>\r\n    )\r\n}\r\n\r\nexport default Signup;","import React, { useState } from 'react'\r\nimport {Redirect} from 'react-router-dom'\r\nimport Layout from '../core/Layout'\r\nimport {signin, authenticate, isAuthenticated} from '../auth'\r\n\r\nconst Signin = () => {\r\n    const [values, setValues] = useState({\r\n        \r\n        email: '',\r\n        password: '',\r\n        error: '',\r\n        loading: false,\r\n        redirectToRefferer: false\r\n    })\r\n\r\n    const {email, password, loading, error, redirectToRefferer} = values\r\n    const {user} = isAuthenticated() \r\n\r\n    const handleChange = name => event => {\r\n        setValues({...values, error: false, [name]: event.target.value});\r\n    }\r\n\r\n    \r\n    const clickSubmit = (event) => {\r\n        event.preventDefault()\r\n        setValues({...values, error: false, loading: true})\r\n        signin({email, password})\r\n        .then(data => {\r\n            if(data.error){\r\n                setValues({...values, error: data.error, success: false})\r\n            }\r\n            else{\r\n                authenticate(data, () => {\r\n                    setValues({\r\n                        ...values,\r\n                        redirectToRefferer: true\r\n                    })\r\n                })\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    const signUpForm = () => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input onChange={handleChange('email')} type=\"email\" value={email} className=\"form-control\"/>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input onChange={handleChange('password')} type=\"password\" value={password} className=\"form-control\"/>\r\n            </div>\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">Submit</button>\r\n        </form>\r\n    )\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}}>\r\n            {error}\r\n        </div>\r\n    )\r\n\r\n    const redirectUser = () => {\r\n        if (redirectToRefferer) {\r\n            if (user && user.role === 1) {\r\n                return <Redirect to=\"/admin/dashboard\" />;\r\n            } else {\r\n                return <Redirect to=\"/user/dashboard\" />;\r\n            }\r\n        }\r\n        if (isAuthenticated()) {\r\n            return <Redirect to=\"/\" />;\r\n        }\r\n    };\r\n\r\n    \r\n    const showLoading = () =>\r\n        loading && (\r\n            <div className=\"alert alert-info\">\r\n                <h2>Loading...</h2>\r\n            </div>\r\n        );\r\n\r\n\r\n    return(\r\n        <Layout title=\"Signin\"\r\n    description=\"sign in to ecommerce\"\r\n    className=\"container col-md-8 offset-md-2\">\r\n        {showLoading()}\r\n        {showError()}\r\n        {signUpForm()}\r\n        {redirectUser()}\r\n    </Layout>\r\n    )\r\n}\r\n\r\nexport default Signin;","import { API } from \"../config\";\r\nimport queryString from \"query-string\";\r\n\r\nexport const getProducts = sortBy => {\r\n    return fetch(`${API}/products?sortBy=${sortBy}&order=desc&limit=6`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getCategories = () => {\r\n    return fetch(`${API}/categories`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getFilteredProducts = (skip, limit, filters = {}) => {\r\n    const data = {\r\n        limit,\r\n        skip,\r\n        filters\r\n    };\r\n    return fetch(`${API}/products/by/search`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(data)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n};\r\n\r\nexport const list = params => {\r\n    const query = queryString.stringify(params);\r\n    console.log(\"query\", query);\r\n    return fetch(`${API}/products/search?${query}`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const read = productId => {\r\n    return fetch(`${API}/product/${productId}`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const listRelated = productId => {\r\n    return fetch(`${API}/products/related/${productId}`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getBraintreeClientToken = (userId, token) => {\r\n    return fetch(`${API}/braintree/getToken/${userId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const processPayment = (userId, token, paymentData) => {\r\n    return fetch(`${API}/braintree/payment/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(paymentData)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const createOrder = (userId, token, createOrderData) => {\r\n    return fetch(`${API}/order/create/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ order: createOrderData })\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n","import React from \"react\";\r\nimport { API } from \"../config\";\r\n\r\nconst ShowImage = ({ item, url }) => (\r\n    <div className=\"product-img\">\r\n        <img\r\n            src={`${API}/${url}/photo/${item._id}`}\r\n            alt={item.name}\r\n            className=\"mb-3\"\r\n            style={{ maxHeight: \"100%\", maxWidth: \"100%\" }}\r\n        />\r\n    </div>\r\n);\r\n\r\nexport default ShowImage;\r\n","import React, { useState } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport ShowImage from './ShowImage';\r\nimport moment from 'moment';\r\nimport { addItem, updateItem, removeItem } from './cartHelpers';\r\n\r\nconst Card = ({product, showViewProductButton = true, showAddToCartButton = true, cartUpdate = false ,showRemoveProductButton = false,\r\n    setRun = f => f,\r\n    run = undefined}) => {\r\n\r\n    const [redirect, setRedirect] = useState(false);\r\n    const [count, setCount] = useState(product.count);\r\nconst showViewButton = (showViewProductButton) => {\r\n    return(\r\n        showViewProductButton && (\r\n            <Link to={`/product/${product._id}`}>\r\n            <button className=\"btn btn-outline-primary mr-2 mt-2 mb-2\">View Product</button>\r\n            </Link>\r\n        )\r\n\r\n    )\r\n}\r\n\r\nconst addToCart = () => {\r\n    addItem(product, () => {\r\n        setRedirect(true)\r\n    })\r\n}\r\n\r\nconst shouldRedirect = redirect =>{\r\n    if(redirect){\r\n        return <Redirect to=\"/cart\"/>\r\n    }\r\n}\r\n\r\nconst showAddToCart = (showAddToCartButton) => {\r\n    return (\r\n        showAddToCartButton && (\r\n          <button onClick={addToCart} className=\"btn btn-outline-warning mt-2 mb-2 card-btn-1  \">\r\n            Add to cart\r\n          </button>\r\n        )\r\n      );\r\n        }\r\nconst showStock = quantity => {\r\n    return quantity > 0 ? (\r\n      <span className=\"badge badge-primary badge-pill\">In Stock </span>\r\n    ) : (\r\n      <span className=\"badge badge-primary badge-pill\">Out of Stock </span>\r\n    );\r\n  };\r\n\r\n  const handleChange = productId => event => {\r\n    setRun(!run); // run useEffect in parent Cart\r\n    setCount(event.target.value < 1 ? 1 : event.target.value);\r\n    if (event.target.value >= 1) {\r\n      updateItem(productId, event.target.value);\r\n    }\r\n  };\r\n\r\n\r\n  const showCartUpdateOptions = cartUpdate => {\r\n    return (\r\n      cartUpdate && (\r\n        <div>\r\n          <div className=\"input-group mb-3\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\">Adjust Quantity</span>\r\n            </div>\r\n            <input type=\"number\" className=\"form-control\" value={count} onChange={handleChange(product._id)} />\r\n          </div>\r\n        </div>\r\n      )\r\n    );\r\n  };\r\n  const showRemoveButton = showRemoveProductButton => {\r\n    return (\r\n      showRemoveProductButton && (\r\n        <button\r\n          onClick={() => {\r\n            removeItem(product._id);\r\n            setRun(!run); // run useEffect in parent Cart\r\n          }}\r\n          className=\"btn btn-outline-danger mt-2 mb-2\"\r\n        >\r\n          Remove Product\r\n        </button>\r\n      )\r\n    );\r\n  };\r\n    return(\r\n        \r\n            <div className=\"card\">\r\n                <div className=\"card-header name\">\r\n                    <h5>{product.name}</h5>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    {shouldRedirect(redirect)}\r\n                    <ShowImage item={product} url=\"product\"/>\r\n                    <p className=\"lead mt-2 desc\">\r\n                        {product.description.substring(0, 50)}\r\n                    </p>\r\n                    <p className=\"black-10\">{product.price}</p>\r\n                    <p className=\"black-9\">Category: {product.category && product.category.name}</p>\r\n                    <p className=\"black-8\">Added on {moment(product.createdAt).fromNow()}</p>\r\n                    {showStock(product.quantity)}\r\n                    {product.shipping}\r\n                    <br/>\r\n                        {showViewButton(showViewProductButton)}\r\n                        {showAddToCart(showAddToCartButton)}\r\n                        {showRemoveButton(showRemoveProductButton)}\r\n                        {showCartUpdateOptions(cartUpdate)}\r\n                        \r\n                </div>\r\n            </div>\r\n        \r\n    )\r\n}\r\n\r\n\r\nexport default Card;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { getCategories, list } from \"./apiCore\";\r\nimport Card from \"./Card\";\r\n\r\nconst Search = () => {\r\n    const [data, setData] = useState({\r\n        categories: [],\r\n        category: \"\",\r\n        search: \"\",\r\n        results: [],\r\n        searched: false\r\n    });\r\n\r\n    const { categories, category, search, results, searched } = data;\r\n\r\n    const loadCategories = () => {\r\n        getCategories().then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                setData({ ...data, categories: data });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadCategories();\r\n    }, []);\r\n\r\n    const searchData = () => {\r\n        console.log(search, category);\r\n        if (search) {\r\n            list({ search: search || undefined, category: category }).then(\r\n                response => {\r\n                    if (response.error) {\r\n                        console.log(response.error);\r\n                    } else {\r\n                        setData({ ...data, results: response, searched: true });\r\n                    } \r\n                }\r\n            );\r\n        }\r\n    };\r\n\r\n    const searchSubmit = e => {\r\n        e.preventDefault();\r\n        searchData();\r\n    };\r\n\r\n    const handleChange = name => event => {\r\n        setData({ ...data, [name]: event.target.value, searched: false });\r\n    };\r\n\r\n    const searchMessage = (searched, results) => {\r\n        if (searched && results.length > 0) {\r\n            return `Found ${results.length} products`;\r\n        }\r\n        if (searched && results.length < 1) {\r\n            return `No products found`;\r\n        }\r\n    };\r\n\r\n    const searchedProducts = (results = []) => {\r\n        return (\r\n            <div>\r\n                <h2 className=\"mt-4 mb-4\">\r\n                    {searchMessage(searched, results)}\r\n                </h2>\r\n\r\n                <div className=\"row\">\r\n                    {results.map((product, i) => (\r\n                        <div className=\"col-4 mb-3\">\r\n                            <Card key={i} product={product} />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const searchForm = () => (\r\n        <form onSubmit={searchSubmit}>\r\n            <span className=\"input-group-text\">\r\n                <div className=\"input-group input-group-lg\">\r\n                    <div className=\"input-group-prepend\">\r\n                        {/* <select\r\n                            className=\"btn mr-2\"\r\n                            onChange={handleChange(\"category\")}\r\n                        >\r\n                            <option value=\"All\">All</option>\r\n                            {categories.map((c, i) => (\r\n                                <option key={i} value={c._id}>\r\n                                    {c.name}\r\n                                </option>\r\n                            ))}\r\n                        </select> */}\r\n                    </div>\r\n\r\n                    <input\r\n                        type=\"search\"\r\n                        className=\"form-control\"\r\n                        onChange={handleChange(\"search\")}\r\n                        placeholder=\"Search By Name\"\r\n                    />\r\n                </div>\r\n                <div\r\n                    className=\"btn input-group-append\"\r\n                    style={{ border: \"none\" }}\r\n                >\r\n                    <button className=\"input-group-text\">Search</button>\r\n                </div>\r\n            </span>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"container mb-3\">{searchForm()}</div>\r\n            <div className=\"container-fluid mb-3\">\r\n                {searchedProducts(results)}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Search;\r\n","import React, { useState, useEffect, Fragment } from 'react';\r\nimport Layout from './Layout';\r\nimport { getProducts } from './apiCore';\r\nimport Card from './Card';\r\nimport Search from './Search';\r\n\r\n\r\nconst Home = () => {\r\n\r\n    const [productsBySell, setProductsBySell] = useState([]);\r\n    const [productsByArrival, setProductsByArrival] = useState([]);\r\n    const [error, setError] = useState(false);\r\n\r\n    const loadProductsBySell = () => {\r\n        getProducts('sold').then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setProductsBySell(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    const loadProductsByArrival = () => {\r\n        getProducts('createdAt').then(data => {\r\n            console.log(data);\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setProductsByArrival(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadProductsByArrival();\r\n        loadProductsBySell();\r\n    }, []);\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Covenant University Shopping Mall\"\r\n            description=\"Find Anything You Need In School Online\"\r\n            className=\"container-fluid\"\r\n        >\r\n            <Search/>\r\n            <div className=\"home-style\">\r\n\r\n            \r\n            {/* <Search /> */}\r\n            <h2 className=\"mb-4\">New Arrivals</h2>\r\n            <div className=\"row\">\r\n                {productsByArrival.map((product, i) => (\r\n\r\n                        <Fragment className=\"row\">\r\n                        <div key={i} className=\"col-sm-3 mb-3\">\r\n                            <Card product={product} />\r\n                        </div>\r\n                        </Fragment>\r\n                            \r\n                ))}\r\n            </div>\r\n\r\n            <h2 className=\"mb-4\">Best Sellers</h2>\r\n            <div className=\"row\">\r\n                {productsBySell.map((product, i) => (\r\n                    \r\n                    <Fragment className=\"row\">\r\n                    <div key={i} className=\"col-sm-3 mb-3\">\r\n                        <Card product={product} />\r\n                    </div>\r\n                    </Fragment>\r\n                    \r\n                ))}\r\n            </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n}\r\n    \r\n\r\n\r\nexport default Home;","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"./index\";\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n    <Route\r\n        {...rest}\r\n        render={props =>\r\n            isAuthenticated() ? (\r\n                <Component {...props} />\r\n            ) : (\r\n                <Redirect\r\n                    to={{\r\n                        pathname: \"/signin\",\r\n                        state: { from: props.location }\r\n                    }}\r\n                />\r\n            )\r\n        }\r\n    />\r\n);\r\n\r\nexport default PrivateRoute;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getPurchaseHistory } from \"./apiUser\";\r\nimport moment from \"moment\";\r\n\r\nconst Dashboard = () => {\r\n    const [history, setHistory] = useState([]);\r\n\r\n    const {\r\n        user: { _id, name, email, role }\r\n    } = isAuthenticated();\r\n    const token = isAuthenticated().token;\r\n\r\n    const init = (userId, token) => {\r\n        getPurchaseHistory(userId, token).then(data => {\r\n            if (data.error) {\r\n                console.log(data.error); \r\n            } else {\r\n                setHistory(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        init(_id, token);\r\n    }, []);\r\n\r\n    const userLinks = () => {\r\n        return (\r\n            <div className=\"card\">\r\n                <h4 className=\"card-header\">User Links</h4>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/cart\">\r\n                            My Cart\r\n                        </Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to={`/profile/${_id}`}>\r\n                            Update Profile\r\n                        </Link>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const userInfo = () => {\r\n        return (\r\n            <div className=\"card mb-5\">\r\n                <h3 className=\"card-header\">User Information</h3>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">{name}</li>\r\n                    <li className=\"list-group-item\">{email}</li>\r\n                    <li className=\"list-group-item\">\r\n                        {role === 1 ? \"Admin\" : \"Registered User\"}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const purchaseHistory = history => {\r\n        return (\r\n            <div className=\"card mb-5\">\r\n                <h3 className=\"card-header\">Purchase history</h3>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                        {history.map((h, i) => {\r\n                            return (\r\n                                <div>\r\n                                    <hr />\r\n                                    {h.products.map((p, i) => {\r\n                                        return (\r\n                                            <div key={i}>\r\n                                                <h6>Product name: {p.name}</h6>\r\n                                                <h6>\r\n                                                    Product price: ${p.price}\r\n                                                </h6>\r\n                                                <h6>\r\n                                                    Purchased date:{\" \"}\r\n                                                    {moment(\r\n                                                        p.createdAt\r\n                                                    ).fromNow()}\r\n                                                </h6>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Dashboard\"\r\n            description={`G'day ${name}!`}\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">{userLinks()}</div>\r\n                <div className=\"col-9\">\r\n                    {userInfo()}\r\n                    {purchaseHistory(history)}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Dashboard;\r\n","import { API } from \"../config\";\r\n\r\nexport const read = (userId, token) => {\r\n    return fetch(`${API}/user/${userId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const update = (userId, token, user) => {\r\n    return fetch(`${API}/user/${userId}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const updateUser = (user, next) => {\r\n    if (typeof window !== \"undefined\") {\r\n        if (localStorage.getItem(\"jwt\")) {\r\n            let auth = JSON.parse(localStorage.getItem(\"jwt\"));\r\n            auth.user = user;\r\n            localStorage.setItem(\"jwt\", JSON.stringify(auth));\r\n            next();\r\n        }\r\n    }\r\n};\r\n\r\nexport const getPurchaseHistory = (userId, token) => {\r\n    return fetch(`${API}/orders/by/user/${userId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"./index\";\r\n\r\nconst AdminRoute = ({ component: Component, ...rest }) => (\r\n    <Route\r\n        {...rest}\r\n        render={props =>\r\n            isAuthenticated() && isAuthenticated().user.role === 1 ? (\r\n                <Component {...props} />\r\n            ) : (\r\n                <Redirect\r\n                    to={{\r\n                        pathname: \"/signin\",\r\n                        state: { from: props.location }\r\n                    }}\r\n                />\r\n            )\r\n        }\r\n    />\r\n);\r\n\r\nexport default AdminRoute;\r\n","import React from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminDashboard = () => {\r\n    const {\r\n        user: { _id, name, email, role }\r\n    } = isAuthenticated();\r\n\r\n    const adminLinks = () => {\r\n        return (\r\n            <div className=\"card\">\r\n                <h4 className=\"card-header\">Admin Links</h4>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/create/category\">\r\n                            Create Category\r\n                        </Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/create/product\">\r\n                            Create Product\r\n                        </Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/admin/orders\">\r\n                            View Orders\r\n                        </Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/admin/products\">\r\n                            Manage Products\r\n                        </Link>\r\n                    </li>\r\n                    \r\n                </ul>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const adminInfo = () => {\r\n        return (\r\n            <div className=\"card mb-5\">\r\n                <h3 className=\"card-header\">User Information</h3>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">{name}</li>\r\n                    <li className=\"list-group-item\">{email}</li>\r\n                    <li className=\"list-group-item\">\r\n                        {role === 1 ? \"Admin\" : \"Registered User\"}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Dashboard\"\r\n            description={`G'day ${name}!`}\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">{adminLinks()}</div>\r\n                <div className=\"col-9\">{adminInfo()}</div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;\r\n","import { API } from '../config';\r\n\r\nexport const createCategory = (userId, token, category) => {\r\n    return fetch(`${API}/category/create/${userId}`, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(category)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n};\r\n\r\nexport const updateCategory = (categoryId, userId, token, category) => {\r\n    return fetch(`${API}/category/${categoryId}/${userId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            // content type?\r\n            'Content-Type': 'application/json',\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(category)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const createProduct = (userId, token, product) => {\r\n    return fetch(`${API}/product/create/${userId}`, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: product\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n};\r\n\r\nexport const getCategory = categoryId => {\r\n    return fetch(`${API}/category/${categoryId}`, {\r\n        method: 'GET'\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getCategories = () => {\r\n    return fetch(`${API}/categories`, {\r\n        method: 'GET'\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const listOrders = (userId, token) => {\r\n    return fetch(`${API}/order/list/${userId}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getStatusValues = (userId, token) => {\r\n    return fetch(`${API}/order/status-values/${userId}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const updateOrderStatus = (userId, token, orderId, status) => {\r\n    return fetch(`${API}/order/${orderId}/status/${userId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ status, orderId })\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\n/**\r\n * to perform crud on product\r\n * get all products\r\n * get a single product\r\n * update single product\r\n * delete single product\r\n */\r\n\r\nexport const getProducts = () => {\r\n    return fetch(`${API}/products?limit=undefined`, {\r\n        method: 'GET'\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const deleteProduct = (productId, userId, token) => {\r\n    return fetch(`${API}/product/${productId}/${userId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getProduct = productId => {\r\n    return fetch(`${API}/product/${productId}`, {\r\n        method: 'GET'\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const updateProduct = (productId, userId, token, product) => {\r\n    return fetch(`${API}/product/${productId}/${userId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: product\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createCategory } from \"./apiAdmin\";\r\n\r\nconst AddCategory = () => {\r\n    const [name, setName] = useState(\"\");\r\n    const [error, setError] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    // destructure user and token from localstorage\r\n    const { user, token } = isAuthenticated();\r\n\r\n    const handleChange = e => {\r\n        setError(\"\");\r\n        setName(e.target.value);\r\n    };\r\n\r\n    const clickSubmit = e => {\r\n        e.preventDefault();\r\n        setError(\"\");\r\n        setSuccess(false);\r\n        //make request to api to create category\r\n        createCategory(user._id, token, { name }).then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setError(\"\");\r\n                setSuccess(true);\r\n            }\r\n        });\r\n    };\r\n\r\n    const newCategoryFom = () => (\r\n        <form onSubmit={clickSubmit}>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                    value={name}\r\n                    autoFocus\r\n                    required\r\n                />\r\n            </div>\r\n            <button className=\"btn btn-outline-primary\">Create Category</button>\r\n        </form>\r\n    );\r\n\r\n    const showSuccess = () => {\r\n        if (success) {\r\n            return <h3 className=\"text-success\">{name} is created</h3>;\r\n        }\r\n    };\r\n\r\n    const showError = () => {\r\n        if (error) {\r\n            return <h3 className=\"text-danger\">Category should be unique</h3>;\r\n        }\r\n    };\r\n\r\n    const goBack = () => (\r\n        <div className=\"mt-5\">\r\n            <Link to=\"/admin/dashboard\" className=\"text-warning\">\r\n                Back to Dashboard\r\n            </Link>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Add a new category\"\r\n            description={`G'day ${user.name}, ready to add a new category?`}\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showSuccess()}\r\n                    {showError()}\r\n                    {newCategoryFom()}\r\n                    {goBack()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default AddCategory;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport { createProduct, getCategories } from './apiAdmin';\r\n\r\nconst AddProduct = () => {\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        description: '',\r\n        price: '',\r\n        categories: [],\r\n        category: '',\r\n        shipping: '',\r\n        quantity: '',\r\n        location: '',\r\n        telegram_no: '',\r\n        instagram_handle: '',\r\n        _isNew: '',\r\n        _store: '',\r\n        photo: '',\r\n        email_address: '',\r\n        loading: false,\r\n        error: '',\r\n        createdProduct: '',\r\n        redirectToProfile: false,\r\n        formData: ''\r\n    });\r\n\r\n    const { user, token } = isAuthenticated();\r\n    const {\r\n        name,\r\n        description,\r\n        price,\r\n        categories,\r\n        category,\r\n        shipping,\r\n        quantity,\r\n        email_address,\r\n        location,\r\n        telegram_no,\r\n        instagram_handle,\r\n        _isNew,\r\n        _store,\r\n        loading,\r\n        error,\r\n        createdProduct,\r\n        redirectToProfile,\r\n        formData\r\n    } = values;\r\n\r\n    // load categories and set form data\r\n    const init = () => {\r\n        getCategories().then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    categories: data,\r\n                    formData: new FormData()\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, []);\r\n\r\n    const handleChange = name => event => {\r\n        const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n        formData.set(name, value);\r\n        setValues({ ...values, [name]: value });\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, error: '', loading: true });\r\n\r\n        createProduct(user._id, token, formData).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    name: '',\r\n                    description: '',\r\n                    location: '',\r\n                    telegram_no: '',\r\n                    instagram_handle: '',\r\n                    _isNew: '',\r\n                    _store: '',\r\n                    email_address: '',\r\n                    photo: '',\r\n                    price: '',\r\n                    quantity: '',\r\n                    loading: false,\r\n                    createdProduct: data.name\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    const newPostForm = () => (\r\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n            <h4>Post Photo</h4>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-secondary\">\r\n                    <input onChange={handleChange('photo')} type=\"file\" name=\"photo\" accept=\"image/*\" />\r\n                </label>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Description</label>\r\n                <textarea onChange={handleChange('description')} className=\"form-control\" value={description} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Price</label>\r\n                <input onChange={handleChange('price')} type=\"number\" className=\"form-control\" value={price} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Category</label>\r\n                <select onChange={handleChange('category')} className=\"form-control\">\r\n                    <option>Please select</option>\r\n                    {categories &&\r\n                        categories.map((c, i) => (\r\n                            <option key={i} value={c._id}>\r\n                                {c.name}\r\n                            </option>\r\n                        ))}\r\n                </select>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name Of Seller Or Store</label>\r\n                <input onChange={handleChange('_store')} className=\"form-control\" value={_store} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Is The Porduct New</label>\r\n                <select onChange={handleChange('_isNew')} className=\"form-control\">\r\n                    <option>Please select</option>\r\n                    <option value=\"0\">Yes</option>\r\n                    <option value=\"1\">No</option>\r\n                </select>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Product Location</label>\r\n                <textarea onChange={handleChange('location')} className=\"form-control\" value={location} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email Address</label>\r\n                <input onChange={handleChange('email_address')} type=\"email\" className=\"form-control\" value={email_address} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Telegram Phone Number</label>\r\n                <input onChange={handleChange('telegram_no')} type=\"text\" className=\"form-control\" value={telegram_no} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Instagram Handle</label>\r\n                <input onChange={handleChange('instagram_handle')} type=\"text\" className=\"form-control\" value={instagram_handle} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Product</label>\r\n                <select onChange={handleChange('shipping')} className=\"form-control\">\r\n                    <option>Please select</option>\r\n                    <option value=\"0\">New</option>\r\n                    <option value=\"1\">Used</option>\r\n                    <option value=\"1\">Manufactured</option>\r\n                </select>\r\n            </div>\r\n\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Quantity</label>\r\n                <input onChange={handleChange('quantity')} type=\"number\" className=\"form-control\" value={quantity} />\r\n            </div>\r\n\r\n            <button className=\"btn btn-outline-primary\">Create Product</button>\r\n        </form>\r\n    );\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\r\n            {error}\r\n        </div>\r\n    );\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-info\" style={{ display: createdProduct ? '' : 'none' }}>\r\n            <h2>{`${createdProduct}`} is created!</h2>\r\n        </div>\r\n    );\r\n\r\n    const showLoading = () =>\r\n        loading && (\r\n            <div className=\"alert alert-success\">\r\n                <h2>Loading...</h2>\r\n            </div>\r\n        );\r\n\r\n    return (\r\n        <Layout title=\"Add a new product\" description={`G'day ${user.name}, ready to add a new product?`}>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showLoading()}\r\n                    {showSuccess()}\r\n                    {showError()}\r\n                    {newPostForm()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default AddProduct;\r\n","import React, { useState } from \"react\";\r\n\r\nconst Checkbox = ({ categories, handleFilters }) => {\r\n    const [checked, setCheked] = useState([]);\r\n\r\n    const handleToggle = c => () => {\r\n        // return the first index or -1\r\n        const currentCategoryId = checked.indexOf(c);\r\n        const newCheckedCategoryId = [...checked];\r\n        // if currently checked was not already in checked state > push\r\n        // else pull/take off\r\n        if (currentCategoryId === -1) {\r\n            newCheckedCategoryId.push(c);\r\n        } else {\r\n            newCheckedCategoryId.splice(currentCategoryId, 1);\r\n        }\r\n        // console.log(newCheckedCategoryId);\r\n         setCheked(newCheckedCategoryId);\r\n         handleFilters(newCheckedCategoryId);\r\n    };\r\n\r\n    return categories.map((c, i) => (\r\n        <li key={i} className=\"list-unstyled\">\r\n            <input\r\n                onChange={handleToggle(c._id)}\r\n                value={checked.indexOf(c._id === -1)}\r\n                type=\"checkbox\"\r\n                className=\"form-check-input\"\r\n            />\r\n            <label className=\"form-check-label\">{c.name}</label>\r\n        </li>\r\n    ));\r\n};\r\n\r\nexport default Checkbox;","import React, { useState } from \"react\";\r\n\r\nconst RadioBox = ({ prices, handleFilters }) => {\r\n    const [value, setValue] = useState(0);\r\n\r\n    const handleChange = event => {\r\n        handleFilters(event.target.value);\r\n        setValue(event.target.value);\r\n    };\r\n\r\n    return prices.map((p, i) => (\r\n        <div key={i}>\r\n            <input\r\n                onChange={handleChange}\r\n                value={`${p._id}`}\r\n                name={p}\r\n                type=\"radio\"\r\n                className=\"mr-2 ml-4\"\r\n            />\r\n            <label className=\"form-check-label\">{p.name}</label>\r\n        </div>\r\n    ));\r\n};\r\n\r\nexport default RadioBox;\r\n","export const prices = [\r\n    {\r\n        _id: 0,\r\n        name: \"Any\",\r\n        array: []\r\n    },\r\n    {\r\n        _id: 1,\r\n        name: \"$0 to $9\",\r\n        array: [0, 9]\r\n    },\r\n    {\r\n        _id: 2,\r\n        name: \"$10 to $19\",\r\n        array: [10, 19]\r\n    },\r\n    {\r\n        _id: 3,\r\n        name: \"$20 to $29\",\r\n        array: [20, 29]\r\n    },\r\n    {\r\n        _id: 4,\r\n        name: \"$30 to $39\",\r\n        array: [20, 29]\r\n    },\r\n    {\r\n        _id: 5,\r\n        name: \"More than $40\",\r\n        array: [40, 99]\r\n    }\r\n];\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport Card from \"./Card\";\r\nimport { getCategories, getFilteredProducts } from \"./apiCore\";\r\nimport Checkbox from \"./Checkbox\";\r\nimport RadioBox from \"./RadioBox\";\r\nimport { prices } from \"./fixedPrices\";\r\n\r\nconst Shop = () => {\r\n    const [myFilters, setMyFilters] = useState({\r\n        filters: { category: [], price: [] }\r\n    });\r\n    const [categories, setCategories] = useState([]);\r\n    const [error, setError] = useState(false);\r\n    const [limit, setLimit] = useState(6);\r\n    const [skip, setSkip] = useState(0);\r\n    const [size, setSize] = useState(0);\r\n    const [filteredResults, setFilteredResults] = useState([]);\r\n\r\n    const init = () => {\r\n        getCategories().then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setCategories(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    const loadFilteredResults = newFilters => {\r\n        // console.log(newFilters);\r\n        getFilteredProducts(skip, limit, newFilters).then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setFilteredResults(data.data);\r\n                setSize(data.size);\r\n                setSkip(0);\r\n            }\r\n        });\r\n    };\r\n\r\n    const loadMore = () => {\r\n        let toSkip = skip + limit;\r\n        // console.log(newFilters);\r\n        getFilteredProducts(toSkip, limit, myFilters.filters).then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setFilteredResults([...filteredResults, ...data.data]);\r\n                setSize(data.size);\r\n                setSkip(toSkip);\r\n            }\r\n        });\r\n    };\r\n\r\n    const loadMoreButton = () => {\r\n        return (\r\n            size > 0 &&\r\n            size >= limit && (\r\n                <button onClick={loadMore} className=\"btn btn-warning mb-5\">\r\n                    Load more\r\n                </button>\r\n            )\r\n        );\r\n    };\r\n\r\n    useEffect(() => {\r\n        init();\r\n        loadFilteredResults(skip, limit, myFilters.filters);\r\n    }, []);\r\n\r\n    const handleFilters = (filters, filterBy) => {\r\n        // console.log(\"SHOP\", filters, filterBy);\r\n        const newFilters = { ...myFilters };\r\n        newFilters.filters[filterBy] = filters;\r\n\r\n        if (filterBy === \"price\") {\r\n            let priceValues = handlePrice(filters);\r\n            newFilters.filters[filterBy] = priceValues;\r\n        }\r\n        loadFilteredResults(myFilters.filters);\r\n        setMyFilters(newFilters);\r\n    };\r\n\r\n    const handlePrice = value => {\r\n        const data = prices;\r\n        let array = [];\r\n\r\n        for (let key in data) {\r\n            if (data[key]._id === parseInt(value)) {\r\n                array = data[key].array;\r\n            }\r\n        }\r\n        return array;\r\n    };\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Shop Page\"\r\n            description=\"Search and find books of your choice\"\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-4\">\r\n                    <h4>Filter by categories</h4>\r\n                    <ul>\r\n                        <Checkbox\r\n                            categories={categories}\r\n                            handleFilters={filters =>\r\n                                handleFilters(filters, \"category\")\r\n                            }\r\n                        />\r\n                    </ul>\r\n\r\n                    <h4>Filter by price range</h4>\r\n                    <div>\r\n                        <RadioBox\r\n                            prices={prices}\r\n                            handleFilters={filters =>\r\n                                handleFilters(filters, \"price\")\r\n                            }\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-8\">\r\n                    <h2 className=\"mb-4\">Products</h2>\r\n                    <div className=\"row\">\r\n                        {filteredResults.map((product, i) => (\r\n                            \r\n                        <div key={i} className=\"col-4 mb-3\">\r\n                            <Card product={product} />\r\n                        </div>\r\n                            \r\n                        ))}\r\n                    </div>\r\n                    <hr />\r\n                    {loadMoreButton()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Shop;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from './Layout';\r\nimport { read, listRelated } from './apiCore';\r\nimport Card from './Card';\r\n\r\nconst Product = props => {\r\n    const [product, setProduct] = useState({});\r\n    const [relatedProduct, setRelatedProduct] = useState([]);\r\n    const [error, setError] = useState(false);\r\n\r\n    const loadSingleProduct = productId => {\r\n        read(productId).then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setProduct(data);\r\n                // fetch related products\r\n                listRelated(data._id).then(data => {\r\n                    if (data.error) {\r\n                        setError(data.error);\r\n                    } else {\r\n                        setRelatedProduct(data);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        const productId = props.match.params.productId;\r\n        loadSingleProduct(productId);\r\n    }, [props]);\r\n\r\n    return(\r\n        <Layout\r\n            title={product && product.name}\r\n            description={product && product.description && product.description.substring(0, 100)}\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"product-style\">\r\n\r\n            \r\n            <div className=\"row\">\r\n                <div className=\"col-6\">\r\n                    {product && product.description && <Card product={product} showViewProductButton={false} />}\r\n                </div>\r\n                \r\n                <div className=\"col-6\">\r\n                <div className=\"card\">\r\n                <div className=\"card-header name\">\r\n                    <h3>Product Details</h3>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                <h6>Product Location: </h6>{product.location}\r\n                <h6>Seller: </h6>{product.location}\r\n                <h6>Seller Instagram: </h6>{product.instagram_handle}\r\n                <h6>Seller Telegram: </h6>{product.telegram_no}\r\n                <h6>Seller Email: </h6>{product.email_address}\r\n                \r\n                </div>\r\n                \r\n                </div>\r\n\r\n                </div>\r\n\r\n                \r\n                    <h4 className=\"mb-4 mt-4\">Related products</h4>\r\n                    <div className=\"row\">\r\n                    {relatedProduct.map((p, i) => (\r\n                        <div className=\"mb-3 related-product col-sm-3\" key={i}>\r\n                            <Card product={p} />\r\n                        </div>\r\n                    ))}\r\n                    </div>\r\n               \r\n            \r\n\r\n            </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default Product;","import React, { useState, useEffect } from 'react';\r\nimport Layout from './Layout';\r\nimport { getProducts } from './apiCore';\r\nimport Card from './Card';\r\nimport {isAuthenticated} from '../auth';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nconst Checkout = ({products}) =>{\r\n    const getTotal = () => {\r\n        return products.reduce((currentValue, nextValue) => {\r\n            return currentValue + nextValue.count * nextValue.price;\r\n        }, 0)\r\n    }\r\n\r\n    const showCheckout = () => {\r\n        return isAuthenticated() ? (\r\n            <button className=\"btn btn-success\">Checkout</button>\r\n        ) : (\r\n            <Link to=\"/signin\">\r\n                <button className=\"btn btn-primary\">Sign In To Checkout</button>\r\n            </Link>\r\n            \r\n        )\r\n    }\r\n    return <div>\r\n        <h2>Total: ${getTotal()}</h2>\r\n\r\n        {showCheckout()}\r\n    </div>;\r\n}\r\n\r\nexport default Checkout;","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Layout from './Layout';\r\nimport { getCart } from './cartHelpers';\r\nimport Card from './Card';\r\nimport Checkout from './Checkout';\r\n\r\nconst Cart = () => {\r\n    const [items, setItems] = useState([]);\r\n    const [run, setRun] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setItems(getCart());\r\n    }, [run]);\r\n\r\n    const showItems = items => {\r\n        return (\r\n            <div>\r\n                <h2>Your cart has {`${items.length}`} items</h2>\r\n                <hr />\r\n                {items.map((product, i) => (\r\n                    <Card\r\n                        key={i}\r\n                        product={product}\r\n                        showAddToCartButton={false}\r\n                        cartUpdate={true}\r\n                        showRemoveProductButton={true}\r\n                        setRun={setRun}\r\n                        run={run}\r\n                    />\r\n                ))}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const noItemsMessage = () => (\r\n        <h2>\r\n            Your cart is empty. <br /> <Link to=\"/shop\">Continue shopping</Link>\r\n        </h2>\r\n    );\r\n\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Shopping Cart\"\r\n            description=\"Manage your cart items. Add remove checkout or continue shopping.\"\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">{items.length > 0 ? showItems(items) : noItemsMessage()}</div>\r\n\r\n                <div className=\"col-6\">\r\n                    <h2 className=\"mb-4\">Your cart summary</h2>\r\n                    <hr />\r\n                    <Checkout products={items} setRun={setRun} run={run} />\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { read, update, updateUser } from './apiUser';\r\n\r\nconst Profile = ({match}) => {\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        error: 'false',\r\n        success: false\r\n    });\r\n\r\n    const {token} = isAuthenticated()\r\n\r\n    const {name, email, password, error, success} = values\r\n\r\n    const init = (userId) => {\r\n        // console.log(userId)\r\n        read(userId, token).then(data => {\r\n            if(data.error){\r\n                setValues({...values, error: true})\r\n            }\r\n            else{\r\n                setValues({...values, name: data.name, email: data.email})\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        init(match.params.userId)\r\n    }, []);\r\n\r\n    const handleChange = name => e => {\r\n        setValues({ ...values, error: false, [name]: e.target.value });\r\n    };\r\n\r\n    const clickSubmit = e => {\r\n        e.preventDefault();\r\n        update(match.params.userId, token, { name, email, password }).then(data => {\r\n            if (data.error) {\r\n                // console.log(data.error);\r\n                alert(data.error);\r\n            } else {\r\n                updateUser(data, () => {\r\n                    setValues({\r\n                        ...values,\r\n                        name: data.name,\r\n                        email: data.email,\r\n                        success: true\r\n                    });\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    const redirectUser = success => {\r\n        if (success) {\r\n            return <Redirect to=\"/cart\" />;\r\n        }\r\n    };\r\n\r\n    const profileUpdate = (name, email, password) => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input type=\"text\" onChange={handleChange('name')} className=\"form-control\" value={name} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input type=\"email\" onChange={handleChange('email')} className=\"form-control\" value={email} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input type=\"password\" onChange={handleChange('password')} className=\"form-control\" value={password} />\r\n            </div>\r\n\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">\r\n                Submit\r\n            </button>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <Layout title=\"Profile\" description=\"Update your profile\" className=\"container-fluid\">\r\n            <h2 className=\"mb-4\">Profile update</h2>\r\n            {profileUpdate(name, email, password)}\r\n            {redirectUser(success)}\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default Profile;","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getProducts, deleteProduct } from \"./apiAdmin\";\r\n\r\nconst ManageProducts = () => {\r\n    const [products, setProducts] = useState([]);\r\n\r\n    const { user, token } = isAuthenticated();\r\n\r\n    const loadProducts = () => {\r\n        getProducts().then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                setProducts(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    const destroy = productId => {\r\n        deleteProduct(productId, user._id, token).then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                loadProducts();\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadProducts();\r\n    }, []);\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Manage Products\"\r\n            description=\"Perform CRUD on products\"\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-12\">\r\n                    <h2 className=\"text-center\">\r\n                        Total {products.length} products\r\n                    </h2>\r\n                    <hr />\r\n                    <ul className=\"list-group\">\r\n                        {products.map((p, i) => (\r\n                            <li\r\n                                key={i}\r\n                                className=\"list-group-item d-flex justify-content-between align-items-center\"\r\n                            >\r\n                                <strong>{p.name}</strong>\r\n                                <Link to={`/admin/product/update/${p._id}`}>\r\n                                    <span className=\"badge badge-warning badge-pill\">\r\n                                        Update\r\n                                    </span>\r\n                                </Link>\r\n                                <span\r\n                                    onClick={() => destroy(p._id)}\r\n                                    className=\"badge badge-danger badge-pill\"\r\n                                >\r\n                                    Delete\r\n                                </span>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                    <br />\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default ManageProducts;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { getProduct, getCategories, updateProduct } from './apiAdmin';\r\n\r\nconst UpdateProduct = ({ match }) => {\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        description: '',\r\n        price: '',\r\n        categories: [],\r\n        category: '',\r\n        shipping: '',\r\n        quantity: '',\r\n        photo: '',\r\n        loading: false,\r\n        error: false,\r\n        createdProduct: '',\r\n        redirectToProfile: false,\r\n        formData: ''\r\n    });\r\n    const [categories, setCategories] = useState([]);\r\n\r\n    const { user, token } = isAuthenticated();\r\n    const {\r\n        name,\r\n        description,\r\n        price,\r\n        // categories,\r\n        category,\r\n        shipping,\r\n        quantity,\r\n        loading,\r\n        error,\r\n        createdProduct,\r\n        redirectToProfile,\r\n        formData\r\n    } = values;\r\n\r\n    const init = productId => {\r\n        getProduct(productId).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                // populate the state\r\n                setValues({\r\n                    ...values,\r\n                    name: data.name,\r\n                    description: data.description,\r\n                    price: data.price,\r\n                    category: data.category._id,\r\n                    shipping: data.shipping,\r\n                    quantity: data.quantity,\r\n                    formData: new FormData()\r\n                });\r\n                // load categories\r\n                initCategories();\r\n            }\r\n        });\r\n    };\r\n\r\n    // load categories and set form data\r\n    const initCategories = () => {\r\n        getCategories().then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setCategories(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        init(match.params.productId);\r\n    }, []);\r\n\r\n    const handleChange = name => event => {\r\n        const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n        formData.set(name, value);\r\n        setValues({ ...values, [name]: value });\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, error: '', loading: true });\r\n\r\n        updateProduct(match.params.productId, user._id, token, formData).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    name: '',\r\n                    description: '',\r\n                    photo: '',\r\n                    price: '',\r\n                    quantity: '',\r\n                    loading: false,\r\n                    error: false,\r\n                    redirectToProfile: true,\r\n                    createdProduct: data.name\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    const newPostForm = () => (\r\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n            <h4>Post Photo</h4>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-secondary\">\r\n                    <input onChange={handleChange('photo')} type=\"file\" name=\"photo\" accept=\"image/*\" />\r\n                </label>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Description</label>\r\n                <textarea onChange={handleChange('description')} className=\"form-control\" value={description} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Price</label>\r\n                <input onChange={handleChange('price')} type=\"number\" className=\"form-control\" value={price} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Category</label>\r\n                <select onChange={handleChange('category')} className=\"form-control\">\r\n                    <option>Please select</option>\r\n                    {categories &&\r\n                        categories.map((c, i) => (\r\n                            <option key={i} value={c._id}>\r\n                                {c.name}\r\n                            </option>\r\n                        ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Shipping</label>\r\n                <select onChange={handleChange('shipping')} className=\"form-control\">\r\n                    <option>Please select</option>\r\n                    <option value=\"0\">No</option>\r\n                    <option value=\"1\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Quantity</label>\r\n                <input onChange={handleChange('quantity')} type=\"number\" className=\"form-control\" value={quantity} />\r\n            </div>\r\n\r\n            <button className=\"btn btn-outline-primary\">Update Product</button>\r\n        </form>\r\n    );\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\r\n            {error}\r\n        </div>\r\n    );\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-info\" style={{ display: createdProduct ? '' : 'none' }}>\r\n            <h2>{`${createdProduct}`} is updated!</h2>\r\n        </div>\r\n    );\r\n\r\n    const showLoading = () =>\r\n        loading && (\r\n            <div className=\"alert alert-success\">\r\n                <h2>Loading...</h2>\r\n            </div>\r\n        );\r\n\r\n    const redirectUser = () => {\r\n        if (redirectToProfile) {\r\n            if (!error) {\r\n                return <Redirect to=\"/\" />;\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Layout title=\"Add a new product\" description={`G'day ${user.name}, ready to add a new product?`}>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showLoading()}\r\n                    {showSuccess()}\r\n                    {showError()}\r\n                    {newPostForm()}\r\n                    {redirectUser()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default UpdateProduct;\r\n","import React from 'react'\r\nimport {BrowserRouter, Switch, Route} from 'react-router-dom'\r\nimport Signup from './user/Signup'\r\nimport Signin from './user/Signin'\r\nimport Home from './core/Home'\r\nimport PrivateRoute from './auth/PrivrateRoute';\r\nimport Dashboard from './user/UserDashboard';\r\nimport AdminRoute from './auth/AdminRoute';\r\nimport AdminDashboard from './user/AdminDashboard';\r\nimport AddCategory from './admin/AddCategory';\r\nimport AddProduct from './admin/AddProduct';\r\nimport Shop from './core/Shop';\r\nimport Product from \"./core/Product\";\r\nimport Cart from './core/Cart';\r\nimport Profile from './user/Profile';\r\nimport ManageProducts from './admin/ManageProducts';\r\nimport UpdateProduct from './admin/UpdateProduct';\r\n// import UpdateCategory from './admin/updateCategory';\r\n\r\n\r\n\r\nconst Routes = () => {\r\n    return (\r\n    <BrowserRouter>\r\n        <Switch>\r\n            <Route path=\"/\" exact component={Home}/>\r\n            <Route path=\"/shop\" exact component={Shop} />\r\n            <Route path=\"/signin\" exact component={Signin}/>\r\n            <Route path=\"/signup\" exact component={Signup}/>\r\n            <Route path=\"/product/:productId\" exact component={Product}/>\r\n            <Route path=\"/cart\" exact component={Cart}/>\r\n            <PrivateRoute path=\"/profile/:userId\" exact component={Profile} />            \r\n            <PrivateRoute path=\"/user/dashboard\" exact component={Dashboard}/>\r\n            <AdminRoute path=\"/admin/dashboard\" exact component={AdminDashboard} />\r\n            <AdminRoute path=\"/create/category\" exact component={AddCategory} />\r\n            <AdminRoute path=\"/create/product\" exact component={AddProduct} />\r\n            <PrivateRoute path=\"/admin/products\" exact component={ManageProducts} />\r\n            <AdminRoute path=\"/admin/product/update/:productId\" exact component={UpdateProduct} />\r\n            {/* <AdminRoute path=\"/admin/category/update/:categoryId\" exact component={UpdateCategory} /> */}\r\n        </Switch>\r\n    </BrowserRouter>\r\n    )\r\n}\r\n\r\nexport default Routes;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from './Routes';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Routes />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}